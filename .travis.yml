language: python
python:
- '3.5'
addons:
  apt:
    packages:
    - sshpass
install:
- pip install -r requirements.txt requirements-dev.txt
script:
- python manage.py test
after_success:
- export SSHPASS=$DEPLOY_PASS
- sshpass -e ssh -o stricthostkeychecking=no ${DEPLOY_USER}@${DEPLOY_HOST} bash ${DEPLOY_HOME}/git_deploy.sh "${DEPLOY_PATH}" ${DEPLOY_REPO} ${DEPLOY_BRANCH}
- sshpass -e ssh -o stricthostkeychecking=no $DEPLOY_USER@$DEPLOY_HOST bash $DEPLOY_PATH/deploy.sh
env:
  global:
  - DEPLOY_BRANCH=origin/master
  - DEPLOY_REPO=tmcadam/dfb

  - secure: Qoq+3zdIEvQfZNmW6Re9GFK3G5H26uYWZawHaasgSmw/NRF5l8qGwJGznHXx6+WUhDL1NLXtB+PqxvP/Cu9HW2jxXYQCRZoU8OMAQXVDxHgYcRNpESWW6lLtkocjwZ+ZMY1GoWEe9R1eY2i21fZDVZNxRl+Cus8tNtKMWdmW6S0ygxbFf4VeZmxuFyi28QcO7OpCxhIaY/JvzfdEFtUTRRuUzFy++o1TG71fVC+NKtblvb4zWaCBHYF4c+lUedMsvI/thi4n2W0VlQH+eHv+g8KUe2YW1AFxZOkWB+UbdF1IeikVw+h5a5dLj6xUI+Fy3tsjQcFdaPSAhP808ciJG8NkgM9XXV/cDxoqXLGtF4JmJSSAj1D+ydQ3b9VXZ5dBxA+G+XjLDnFgV/6d9V5mg58WLdXsi6qlH1mhRkZ2kNpayuZ0w9D2ODtO0WVqMd4X2RofKqa6n8W06OtRlGmdEBcxsrq3EiyzUAkk1mEkTVpUouxNgLwlz6BeKlLDGC6H+iBCdVgCCtaKWGeTWbsO5ZUFteBLQ/SSHcSuL5HAHV/Bhob78j73bMaNo2DIk4aTGAFTQwf5oE4W5EKmEfETxH9PcZPV8uhP1mu2/BOIbO2rVD122vakbpknMob0MBLesjMFocFYhE5eCapQmw1wJIlRWWfEj7HCYOMWfIX0AqE=
  - secure: Vp4/GcfX//oAQ+onTrVFWDSqZe0F1pGggpOzkKLrA25tvkOWJqP+sSVLLSoibVFVDao0W0GuLy0x9Kxk4PA+x3/DIEQ6OrM3vL3iqF8vfUjr532EM2e+Y4yj1jete0Y1zqjzp5QLeWoAOdR1qLusGF/ERAba8u+VM8R7jqkI1QuUCrLMjDSxjicIGteMT6q+i5ZvvKME8uSl0BA7rbcGh8G0y0AaLhNh8+OLJmnHTgI6hXN4OG0l4C5YkaW5y/lu4Liw2eRHqZjlCygQwjdGoW6oXXNAQNAGr9J5EnIkGLo0P5yi58VQvdIlmfu3GGgMTepxf0ugria9vdaqae6agsCFCMdCTSF3NNCNP4NjV1POsj2g2YCiNObeLmSOgIj/Fy1+N/wtBPr8XJQLgjaOA1LnH4WfCGMff7qfCa0XBYGRyBYTKBfp9STA0wozKg4B2kvlGB3EXCBJRKiTaQKycR0F9PBcgTzjdNA3kxjPfz3XVOE5iflBKtlILunowYfu6eWJHIiY2V9IzjVixaP/4aCVtRMPVP3nlu8AODNXLQydnK9rwGVO/Xv1tRed49kFXsAB1aFCvMhiUgLt4mJ5WzSQaHakI5fJaLkoPBMrTYJ5mrPlax8TdE/Avq3o5ns8BrArx3kki3g+WXv50KV5yZxGwopimfoyGl4wBib13ZE=
  - secure: aFz64PAiNvMYCXnzSrZUTMRaG3iM6snzFrxeQtaVUZGC62SvULcmHjPFewv/oSMNKb41aturWTRw6UbBN9GAU8idr0PSxpMjo2XX3fbmBN2vlY6bGs9jhx/onCxZvY943zPsV2+hvyhwIfU5PsJ9CjXiERApIqck1/fVnLyuEb0L1lNnYNnf2sBdX62W9NuD20OWoCNesWUB29gplHLb2bA7ehXGmu2Yy7vyKjBwrQPU5cNBndj8ilgO2YpgGSezrlDdlSYn+ZN/B5UjulK27tfzDZH4abRtOdqKSFhenB/wYzH8sJZcyWmp/GzmM/deth+iDse8MmcmMpmbBNP+j2GhKSyRy3P7Hj0uEi+YN6kbuYuHjdV8s9t9pZ/epSR6t0/6EWA+nb85kUAxGW3daB7KxIcpvBsqqqt7Ky31OK2KBoRYE5cfne/zzAMP/CbpzUSCdNvRsYpqTJejNIn3IZ/43nTSaObpf1iSZXZTKgArpoPYz1mYzvG5Rgn6GdBPnnbYcuFb/ihR+9qMUHw4WzUvNsMjwB/CJfNJ5rh3SZlp8o/6SmsL+N4mUuhRmjhvzU8WSG9idKn+8S8YsTuYe+VNo9mETXNIDSoYpEw77bWo9CkBDLIdxLx9p0W3wBh5nzZhJaAsFYzDxow76XNeMnvl62a1MNdZxohDKcVfmXk=

  - secure: T0XLjob4kXo8bWVLipHtHwAmfLcs84bI17EVApokuD6PBoYNJxpefeCEOs2224tStKfzVc3vGn8hR7dWwaPa81YYiCNKJfF7mj2lqTNaesvEGxoZKihbBC1wccM8MHvIzW7qnAIAFJZEX7EDmksADjIX3ULTY5IT4KkyR17aH3IZwU7/8w0rKXjotihce564uo7+R2fPQw/GaLK2JB1KSGiibrYVqX0T3MzLT/qpgtCGSLNHwVmaDQb7ZUxsjaDTCkbbENHoC0BZ42+zOi7xBFC6gonnmJTM6WvjG+W4xHYBXdo+mJDKYO4/2mewnML5Jh17ESL5qz3tL0nAr8ysP8fzOAdgSondWNDjVGMtHwHelxpWwzVmXuAjykb39Lzi6p9IrNJzkVpuRz9j5y2cCbSftpgBbnyuEg0k+4hgB0JsNRxk90+b1WrIMoyY7fzhSd5UIRRx5WTpiOjqfXnciTkKkQppD0rBrIoMrp0u/DyT/OGv/Ez4MT2Xyzrv5j3EvsGtpn/MzVgIaH92Sps0wbDvtYl8APiMfxZPGkLkfuucj3WjJdTpeX593DSaHWoutvRheCVzx/L9aHsJ+wnBeaV4Dr40e+NMwZ5VPFWIefjZvG14SGymB8PblAUcTMsVhEZRjKdKG9KWSwjqC6FNq44I0jUcrL+Wa2vSiHSVSLg=
  - secure: rHVFN2IpXG+Q/lG2Ffpk1S6IbWoX91l1yu4d+rtegHXYIHt3+u2pagv8YszU/fFOuPqbkeMdEMq/8Wa/LFcQbnA87goeTWdqdnGJcBv+rj88tX6szn/Ih6Zrtaz1j6eIwxi+RpvcgpucR7OjFnNXEMekbTGSXA7Y7TFCrZEEUQjKHV7F8yCQpFlyRDTylGXRrma962sv3TMhKg32BsNECjryMqVK436UfHj0pBW18FLy3oEzfOwP7xUcup4+EjJ1AAKhRUvIqOPQvSNhSy0bgZwagKu4h9S30FxMLbohZ4h0mZeLdP0NtOvQPPMVpTVDDseplEYLnG+1BfMyE48n0c/3xOQT+YJpwS4WikY8iOM4CW3bwdYzl9fXxvfGu7jakjGbjqlMeD842YL89Xf6efO7P4VlnBeW+bTpUSZ43Tzp4ISCNOc5CSIl/7BVTp3uritDRG6x9ASuQHI3G1zn2PxQd2tXo0NeiGro4OEVbmGIgTfGjtZ8JVaVdSmwvUSrgrTdGSCxGYSHEc+WwJHQ9/TzhiFdFiDxMtBb6CoZz3JxtpF+8PIfnffndPkC01lQmzcaJDVinBm6qaHeuaJCp2iT7CNngRrMlNRRUm2DfTFupAn+PxCQ+QEjsEafdFKDq2FnZIw/+/5IECqKYq7vxZiODemUNUsowN82YGAkOtM=
