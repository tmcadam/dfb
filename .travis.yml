language: python
python:
- '3.5'
addons:
  apt:
    packages:
    - sshpass
install:
- pip install -r requirements.txt
script:
- python manage.py test
after_success:
- export SSHPASS=$DEPLOY_PASS
- sshpass -e ssh -o stricthostkeychecking=no ${DEPLOY_USER}@${DEPLOY_HOST} bash ${DEPLOY_HOME}/git_deploy.sh "${DEPLOY_PATH}" ${DEPLOY_REPO} ${DEPLOY_BRANCH}
- sshpass -e ssh -o stricthostkeychecking=no $DEPLOY_USER@$DEPLOY_HOST bash $DEPLOY_PATH/deploy.sh
env:
  global:
  - DEPLOY_BRANCH=origin/master
  - DEPLOY_REPO=tmcadam/dfb
  - secure: DSHKtrIICAsFLM8JUyWO6hXCBoJ/13tHMI6pohk7D+/GNkXAsPAmRb+mzaeXw3UE8EtPJ3XKSZOBU0Y5gODJWg+hl9I41Ri7HNRmc/u2JmP5j6snOrKsVp+/PQj6/4DfnFibgyoB9/cdFTH084EERPbCBxUJDmFJI6nPnEU5OqKR2WdcIsImZMIbNhNAI3mh6mJOWniQXlrKPtnrTIweWqHJtaBC81LxzXiPepBIKzfkv/uPGbx4gVxEjXH0CvFc6AdnE6pRdTPChNxx1jp1ED4GtGXGgvH1ErfCZB6PB2UMG6iVSIzp6rGz62Tz2FfTawTpist+wWnlAE+1T+Oum+SaLkH+N/cPdNd3+R3XhaZUj0dhYLElnNAZq7bwsqitAERcHsrpFldQd5ieuyp3ue5l7vLdP/+TclIET+uHm+zDfsHBcdewi2IhGBV5wYSgv7iWVUg7Vrlr5Nl7IRsUphduxALM0wSwScJgRyVWRCla9P/8dEWvHBEhGL3apXUlL/ljplVlgonVSgfVAh6ac61qAOrt3DYohP1zbud4V51xnkXUuu9AVb3OQpacNRQZn44DBwETZifZdNhn0Fp47f7dqYZNP65vtaaILzNbs0DXRiO7mI8Guclx+glFB+l+35LJv5j6v9gHfw6ARMsRBnsV43My46vSxwKS78k6zV8=
  - secure: cv4gBVltyfRqaCfm2xIJVvT85R8O5gA1SZEwEO1tgmwN3GdgFkE1bgabtpnE2W8PZHoK6r2DYeBjmAwWjj8QqD7THb8sR9kX6n1my17anIxOltdAfl2uIH2PaaYJtlJfnDQ94rvNgbAc1I1qFCcoEwnQtuCyZ8fGKZC4NhQ/JDlTDh3Cfd9tlhuo5Y6C7dW+7z2MJY1i8mjUWzfA8UfZpOe2bv0QlvCZEAKO4L1mKThUF1Wf2EMxTk6OvKyqMmDKjRYUyDu21KXAg6InZVJRrDXlL9/JkjNbwoCQ7HdIQFm0RJTSwwdgkr+s0szuTbhYoF4aOQzHIygI68QJ93KM+4OXNsMxD/ryOjaWZ7p8jouYyKMmzL7Jv/TAK+t9+BvOSxPTdpkp3MOocGJ6iC5g1VZMFN65479k7M8GS4003Et21Wh5odNFwxuOv6fjafBZ1d/q8EfqC4pDEL6TY9PoXn4VUOBfIj+SrTk5XjE9LJ46IczZh7fAsxE22zkB36lFwoSF7cB8vp1+WF6v1q7FDcGGGbb8duV7SuaapyHqkMwHUWmmI6NLRVc6506VbxO5k+NeIpNJoJrHe7HvOs0BCSILm5ytmML+olL8nT1e4MeXupIBFzo3S/JVJ1CPI7ASN0tUm4cNjhIH0w8FZX/n3GRaeBx19eHXJYOazdfhB/0=
  - secure: TSgR9gpFMPeQiYcw+VnJTtYh0mWnn3ji2T4kWFWRNgIgJLEtDv2tv506WEc10YeIzxtIrxr/03fEU+hsIrD1GlKDDqn+1763/OlYrhrZvSsARDU0q/2VCjmMFOme0FsYajFNcgSYQIUUn8YO87eWP3wqbr9Q/cKwx+3C7OvsG9YiJlkgXSESG9l4d0FTQVgcnDYJU3vKZZEYpap2GhBSUycTrXT3nj4o7/qXJqz8V492NyDoYppxzQrnHv3rVYjRD0xmHsmJuvyHXCq7rRWTjSmOOOso1ceASN9Q/qH4JvJM9WwEkj2vNaDHJ5PwcvG1GehFgL2qsSkB7mL7F9zVUXAozmC2bYGErbk54cdbdZZ9B5Edn34akC9iUKfEvRVUdbMLvdBKMXKIhE5PmVqnqhUw3nqTW7qICkrdj8FnpXMmelw7OeMu8r7Rq6/oILjyQpOztcn3qibRsiauj1E4ETxpIXDjltxxKT/z1hIb9RMr6cPVDKetuIe/ecQUnaDyoyE+Cjm1IN2+PtIiLDT+nhbH/0KxC+FiEGNDPFf0hEiPsgNNSw3n0pTnDCx0ZADeJcl9dOchCIIgo/iDtTOItj/jyTOIk4scssAuXfvvJSOf/QPwn6zsVXwiZG089ZIwsTpLpFlWLPFsozui1PXBNMCWgjuGNhXJfcx1fB8qv14=
  - secure: T0XLjob4kXo8bWVLipHtHwAmfLcs84bI17EVApokuD6PBoYNJxpefeCEOs2224tStKfzVc3vGn8hR7dWwaPa81YYiCNKJfF7mj2lqTNaesvEGxoZKihbBC1wccM8MHvIzW7qnAIAFJZEX7EDmksADjIX3ULTY5IT4KkyR17aH3IZwU7/8w0rKXjotihce564uo7+R2fPQw/GaLK2JB1KSGiibrYVqX0T3MzLT/qpgtCGSLNHwVmaDQb7ZUxsjaDTCkbbENHoC0BZ42+zOi7xBFC6gonnmJTM6WvjG+W4xHYBXdo+mJDKYO4/2mewnML5Jh17ESL5qz3tL0nAr8ysP8fzOAdgSondWNDjVGMtHwHelxpWwzVmXuAjykb39Lzi6p9IrNJzkVpuRz9j5y2cCbSftpgBbnyuEg0k+4hgB0JsNRxk90+b1WrIMoyY7fzhSd5UIRRx5WTpiOjqfXnciTkKkQppD0rBrIoMrp0u/DyT/OGv/Ez4MT2Xyzrv5j3EvsGtpn/MzVgIaH92Sps0wbDvtYl8APiMfxZPGkLkfuucj3WjJdTpeX593DSaHWoutvRheCVzx/L9aHsJ+wnBeaV4Dr40e+NMwZ5VPFWIefjZvG14SGymB8PblAUcTMsVhEZRjKdKG9KWSwjqC6FNq44I0jUcrL+Wa2vSiHSVSLg=
  - secure: rHVFN2IpXG+Q/lG2Ffpk1S6IbWoX91l1yu4d+rtegHXYIHt3+u2pagv8YszU/fFOuPqbkeMdEMq/8Wa/LFcQbnA87goeTWdqdnGJcBv+rj88tX6szn/Ih6Zrtaz1j6eIwxi+RpvcgpucR7OjFnNXEMekbTGSXA7Y7TFCrZEEUQjKHV7F8yCQpFlyRDTylGXRrma962sv3TMhKg32BsNECjryMqVK436UfHj0pBW18FLy3oEzfOwP7xUcup4+EjJ1AAKhRUvIqOPQvSNhSy0bgZwagKu4h9S30FxMLbohZ4h0mZeLdP0NtOvQPPMVpTVDDseplEYLnG+1BfMyE48n0c/3xOQT+YJpwS4WikY8iOM4CW3bwdYzl9fXxvfGu7jakjGbjqlMeD842YL89Xf6efO7P4VlnBeW+bTpUSZ43Tzp4ISCNOc5CSIl/7BVTp3uritDRG6x9ASuQHI3G1zn2PxQd2tXo0NeiGro4OEVbmGIgTfGjtZ8JVaVdSmwvUSrgrTdGSCxGYSHEc+WwJHQ9/TzhiFdFiDxMtBb6CoZz3JxtpF+8PIfnffndPkC01lQmzcaJDVinBm6qaHeuaJCp2iT7CNngRrMlNRRUm2DfTFupAn+PxCQ+QEjsEafdFKDq2FnZIw/+/5IECqKYq7vxZiODemUNUsowN82YGAkOtM=
